<!DOCTYPE html>
<html>
<head>



<style type="text/css">
    
    
  
		//on ready...
		$(function() {
		
			//$("#ws_front").animate({backgroundColor: "#000000" });
			
			
			
			//document.getElementById("container_ws").style.backgroundColor = "lightblue";

			//console.log( "ready!" );
			//$("#ws_front").animate({backgroundColor: "#ff0000" });
			//console.log( "after animate!" );
		});

    
    
    
html, body {
  margin: 0; /* äußeren Abstand / Rand auf zurücksetzen */
  padding: 0; /* inneren Abstand zurücksetzen */
  height: 100%; /* Seite soll über volle Höhe gehen */
  color: #aaa; /* graue Textfarbe */
}


    
    
body{
margin:0px;}

#container_ws{
	width:100%;
	height:100%;
	float:right;
	text-align:center;
    background-color:#008000;
}

#ws_front{
	text-align:center;
	width:100%;
    height:100%;
}


#ws_side_left{
	background-color: #cccccc;
	text-align:center;
	width:20%;
}
#ws_side_right{
	background-color: #cccccc;
	text-align:center;
	width:20%;
}

</style>



</head>


	<body>

		<div id="container_ws">
            <div id="ws_front">
                <img id="warning_sign" src="img/warning.png"/>
            </div>
		</div>

        
		<!-- library includes... -->
		<script src="js/jquery-3.2.1.min.js"></script>
		<script src="js/jquery.hotkeys.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

		<!-- custom implementation -->
		<script>

        //initialize timer for "blinking" warning sign    
        var timer;

        function blinkAlert(elm) {
            timer = setInterval(blink, 10);
            
            console.log("start timer: " + timer);
            function blink() {
                elm.fadeOut(300, function() {
                   elm.fadeIn(300);
                });
            }
        }
            
		//define alert object & functions
		function Alert (dangerLevel) {
			this.dangerLevel = dangerLevel;
			this.getDangerLevel = getDangerLevel;
			this.increaseDangerLevel = increaseDangerLevel;
            this.decreaseDangerLevel = decreaseDangerLevel;
			this.changeAlert = changeAlert;
            this.timer = timer;
            this.blinkAlert = blinkAlert;
            
		}

		function getDangerLevel() {
			return this.dangerLevel;
		}
		
            
        //increase danger level of current alert object
        function increaseDangerLevel(amount){
            
            if(this.dangerLevel >= 100-amount){
                console.log("increaseDangerLevel: maximum amount reached!");
                
                this.dangerLevel = 100;
                this.changeAlert();
                
            }else{

                this.dangerLevel += amount;

                console.log( "increaseDangerLevel: added amount: " + amount );
                console.log( "increaseDangerLevel: total amount: " + this.dangerLevel );

                this.changeAlert();

            }
                

			
		}
            
        //decrease danger level of current alert object    
        function decreaseDangerLevel(amount){
            
            
            if(this.dangerLevel <= 0+amount){
                console.log("decreaseDangerLevel: minimum amount reached!");
                
                this.dangerLevel = 0;
                this.changeAlert();
                
            }else{

                this.dangerLevel -= amount;

                console.log( "decreaseDangerLevel: substrated amount: " + amount );
                console.log( "decreaseDangerLevel: total amount: " + this.dangerLevel );

                this.changeAlert();

            }
                
			
		}
            
        
            
        //change alert behavior according to dangerLevel value    
		function changeAlert(){
		
			console.log("changeAlert()");
            console.log("danger level: " + this.dangerLevel);
					
            
            //stop "blinking" in case of dangerlevel > 5
            if (this.dangerLevel < 80){
                console.log("timer id: " + timer);
                clearInterval(timer);
                timer = undefined;
                console.log("changeAlert: stop blinking");
            }
            
			if (this.dangerLevel == 0){
                
                changeColor(0);   
                
            }else if(this.dangerLevel != 0 && this.dangerLevel <= 20){
			
				changeColor(1);
				
			}else if (this.dangerLevel > 20 && this.dangerLevel <= 40 ){
			
				changeColor(2);
				
			}else if (this.dangerLevel > 40 && this.dangerLevel <= 60 ){
			
				changeColor(3);
			
			}else if (this.dangerLevel > 60 && this.dangerLevel <= 80 ){
			
				changeColor(4);
			
			}else if (this.dangerLevel > 80 && this.dangerLevel <= 100 ){
                
                console.log("reddish");
			
				changeColor(5);
                
                if (timer == undefined)
                {  
                    blinkAlert($("#warning_sign"));
                }
			
			}else{
			
			}
		
		}


        //initialize alert object with danger level zero ("0")
		var testAlert = new Alert(0);

		
		//handle hotkey events
		
		//CTRL+ALT+I (INCREASE danger level)
		$(document).on('keydown', null,'alt+ctrl+a', function (e) {
			testAlert.increaseDangerLevel(10);
		});
	
		//CTRL+ALT+D (DECREASE danger level)
		$(document).on('keydown', null,'alt+ctrl+y', function (e) {
			testAlert.decreaseDangerLevel(10);
		});



        //change div color according to danger level    
        function changeColor(dangerLevel){
            
            //define fade speed
            var fadeSpeed = 200;
            
            
            //set fade effect dependent on danger level
            if (dangerLevel == 0){
                
                $("#container_ws").animate({'background-color': "#008000"}, fadeSpeed);
                
            }else if (dangerLevel == 1){
                
                $("#container_ws").animate({'background-color': "#FFD700"}, fadeSpeed);
                
            }else if (dangerLevel == 2){
                
                $("#container_ws").animate({'background-color': "#FFA500"}, fadeSpeed);
                
            }else if (dangerLevel == 3){
                
                $("#container_ws").animate({'background-color': "#FF8C00"}, fadeSpeed);
                
            }else if (dangerLevel == 4){
                
                $("#container_ws").animate({'background-color': "#FF4500"}, fadeSpeed);
                
            }else if (dangerLevel == 5){
                
                $("#container_ws").animate({'background-color': "#FF0000"}, fadeSpeed);
            
               
            }else{
                //TODO
            }      
            
        }

		</script>
		
		
	</body>

</html>